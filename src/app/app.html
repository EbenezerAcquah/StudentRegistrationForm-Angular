<div class="main">
  <div class="container">
  <h1>STUDENT REGISTRATION FORM</h1>

  <form #form="ngForm" (ngSubmit)="onSubmit(form)" class="form">
    <!-- Full Name -->
    <div class="form-group">
      <label for="fullName">Full Name *</label>
      <input
        type="text"
        id="fullName"
        name="fullName"
        [(ngModel)]="fullName"
        #fullNameControl="ngModel"
        required
        minlength="3"
        class="input-field"
      />
      <div class="error-message" *ngIf="fullNameControl && fullNameControl.invalid && fullNameControl.touched">
        <div *ngIf="fullNameControl.errors?.['required']">Full Name is required</div>
        <div *ngIf="fullNameControl.errors?.['minlength']">
          Full Name must be at least 2 characters
        </div>
      </div>
    </div>

    <!-- Email -->
    <div class="form-group">
      <label for="email">Email *</label>
      <input type="email" id="email" name="email" [(ngModel)]="email" #emailControl="ngModel" required email class="input-field"/>
      <div class="error-message" *ngIf="emailControl && emailControl.invalid && emailControl.touched">
        <div *ngIf="emailControl.errors?.['required']">Email is required</div>
        <div *ngIf="emailControl.errors?.['email']">Please enter a valid Email Address</div>
      </div>
    </div>

    <!-- Phone Number -->
    <div class="form-group">
      <label for="phoneNumber">Phone Number *</label>
      <input
        type="text"
        id="phoneNumber"
        name="phoneNumber"
        [(ngModel)]="phoneNumber"
        #phoneControl="ngModel"
        required
        pattern="^0(2|3|5)[0-9]{8}$"
        placeholder="05xxxxxxxx"
        class="input-field"
      />
      <div class="error-message" *ngIf="phoneControl && phoneControl.invalid && phoneControl.touched">
        <div *ngIf="phoneControl.errors?.['required']">Phone Number is required</div>
        <div *ngIf="phoneControl.errors?.['pattern']">
          Phone number must start with 02, 05 and have 10 digits total
        </div>
      </div>
    </div>

    <!-- Gender -->
    <div class="form-group">
      <label for="gender">Gender *</label>
      <select
        id="gender"
        name="gender"
        [(ngModel)]="gender"
        #genderControl="ngModel"
        required
        class="input-field"
      >
        <option value="">-- Select Gender --</option>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
        <option value="Other">Other</option>
      </select>
      <div class="error-message" *ngIf="genderControl && genderControl.invalid && genderControl.touched">
        <div *ngIf="genderControl.errors?.['required']">Gender is required</div>
      </div>
    </div>

    <!-- Date of Birth -->
    <div class="form-group">
      <label for="dob">Date of Birth *</label>
      <input
        type="date"
        id="dob"
        name="dob"
        [(ngModel)]="dateOfBirth"
        #dobControl="ngModel"
        required
        class="input-field"
      />
      <div class="error-message">
        <div *ngIf="dobControl && dobControl.invalid && dobControl.touched">
          <div *ngIf="dobControl.errors?.['required']">Date of Birth is required</div>
        </div>
        <div *ngIf="dateOfBirth && !isDateValid(dateOfBirth)">
          Date cannot be in the future
        </div>
        <div *ngIf="dateOfBirth && isDateValid(dateOfBirth) && !isAgeValid(dateOfBirth)">
          You must be at least 10 years old
        </div>
      </div>
    </div>

    <!-- Program of Study -->
    <div class="form-group">
      <label for="program">Program of Study *</label>
      <select
        id="program"
        name="program"
        [(ngModel)]="programOfStudy"
        #programControl="ngModel"
        required
        class="input-field"
      >
        <option value="">-- Select Program --</option>
        <option value="ICT">ICT</option>
        <option value="Business">Business</option>
        <option value="Arts">Arts</option>
        <option value="Science">Science</option>
      </select>
      <div class="error-message" *ngIf="programControl && programControl.invalid && programControl.touched">
        <div *ngIf="programControl.errors?.['required']">Program of Study is required</div>
      </div>
    </div>

    <!-- Submit and Reset Buttons -->
    <div class="button-group">
      <button type="submit" class="btn btn-submit" [disabled]="form.invalid">
        Submit
      </button>
      <button type="button" class="btn btn-reset" (click)="resetForm(form)">
        Reset
      </button>
    </div>
  </form>

  <!-- Submitted Data Display -->
  <div class="result-card" *ngIf="submitted && submittedData">
    <h2>Registration Successful!</h2>
    <div class="result-content">
      <div class="result-row">
        <span class="result-label">Full Name:</span>
        <span class="result-value">{{ submittedData.fullName }}</span>
      </div>
      <div class="result-row">
        <span class="result-label">Email:</span>
        <span class="result-value">{{ submittedData.email }}</span>
      </div>
      <div class="result-row">
        <span class="result-label">Phone Number:</span>
        <span class="result-value">{{ submittedData.phoneNumber }}</span>
      </div>
      <div class="result-row">
        <span class="result-label">Gender:</span>
        <span class="result-value">{{ submittedData.gender }}</span>
      </div>
      <div class="result-row">
        <span class="result-label">Date of Birth:</span>
        <span class="result-value">{{ submittedData.dateOfBirth | date: 'MMM d, yyyy' }}</span>
      </div>
      <div class="result-row">
        <span class="result-label">Program of Study:</span>
        <span class="result-value">{{ submittedData.programOfStudy }}</span>
      </div>
    </div>
  </div>
</div>
<app-student-registration></app-student-registration>
<app-reactive-form-demo></app-reactive-form-demo>
</div>